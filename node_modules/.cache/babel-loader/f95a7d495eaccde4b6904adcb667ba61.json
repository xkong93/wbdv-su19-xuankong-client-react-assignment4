{"ast":null,"code":"import widgets from '../data/widgets';\nimport WidgetService from '../services/WidgetService'; // reducer => state => store => provider => container => map to props => components\n\nconst widgetService = WidgetService.getInstance();\nvar data = widgetService.findAllWidgets();\n\nconst widgetReducer = (state = {\n  widgets: widgets,\n  preview: false\n}, action) => {\n  if (action.type === 'DELETE_WIDGET') {\n    return {\n      widgets: state.widgets.filter(widget => widget.id !== action.widgetId)\n    };\n  } else if (action.type === 'CREATE_WIDGET') {\n    return {\n      widgets: [...state.widgets, {\n        id: new Date().getTime(),\n        name: 'New Widget',\n        type: 'HEADING',\n        size: '1',\n        text: \"heading demo\",\n        href: \"\",\n        src: \"\",\n        ordered: \"true\"\n      }]\n    };\n  } else if (action.type === 'UPDATE_WIDGET') {\n    // console.log(typeof JSON.parse(action.widget.ordered));\n    return {\n      widgets: state.widgets.map(widget => {\n        if (widget.id === action.widget.id) {\n          widget.size = action.widget.size;\n          widget.text = action.widget.text;\n          widget.href = action.widget.href;\n          widget.src = action.widget.src;\n          widget.ordered = action.widget.ordered; // how to convert string to boolean\n\n          return action.widget;\n        }\n\n        return widget;\n      })\n    };\n  } else if (action.type === \"Move_Down\") {\n    return {\n      widgets: newDownWidgets(action.widget, state.widgets)\n    };\n  } else if (action.type === \"Move_Up\") {\n    return {\n      widgets: newUpWidgets(action.widget, state.widgets)\n    };\n  } else if (action.type === \"FIND_WIDGET\") {\n    return {\n      widget: state.widgets.find(widget => widget.id == action.wid)\n    };\n  } else if (action.type === \"FIND_ALL_WIDGET\") {\n    return {\n      widgets: [...state.widgets]\n    };\n  } else if (action.tpye === \"PREVIEW\") {\n    console.log(\"preview\");\n    let newState = Object.assign({}, state);\n    newState.preview = !newState.preview;\n    return newState;\n  }\n\n  return state;\n};\n\nvar newDownWidgets = (targetWidget, widgets) => {\n  let newArr = [...widgets];\n\n  if (newArr.length < 2) {\n    return newArr;\n  }\n\n  for (var i = 0; i < newArr.length; i++) {\n    if (targetWidget.id === newArr[i].id && i < newArr.length - 1) {\n      var tempWidget = newArr[i + 1];\n      console.log(tempWidget);\n      newArr[i + 1] = newArr[i];\n      newArr[i] = tempWidget;\n      break; //once it is found, it needs to break\n    }\n  }\n\n  return newArr;\n};\n\nvar newUpWidgets = (targetWidget, widgets) => {\n  let newArr = [...widgets];\n\n  if (newArr.length < 2) {\n    return newArr;\n  }\n\n  for (var i = 0; i < newArr.length; i++) {\n    if (targetWidget.id === newArr[i].id && i > 0) {\n      var tempWidget = newArr[i - 1];\n      console.log(tempWidget);\n      newArr[i - 1] = newArr[i];\n      newArr[i] = tempWidget;\n      break; //once it is found, it needs to break\n    }\n  }\n\n  return newArr;\n};\n\nexport default widgetReducer;","map":{"version":3,"sources":["/Users/xuankong/Documents/Onedrive/NEU/CS5610/wbdv-su19-xuankong-client-react-assignment4/src/reducers/widgetReducer.js"],"names":["widgets","WidgetService","widgetService","getInstance","data","findAllWidgets","widgetReducer","state","preview","action","type","filter","widget","id","widgetId","Date","getTime","name","size","text","href","src","ordered","map","newDownWidgets","newUpWidgets","find","wid","tpye","console","log","newState","Object","assign","targetWidget","newArr","length","i","tempWidget"],"mappings":"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","sourcesContent":["import widgets from '../data/widgets'\nimport WidgetService from '../services/WidgetService'\n// reducer => state => store => provider => container => map to props => components\nconst widgetService = WidgetService.getInstance()\n\nvar data = widgetService.findAllWidgets();\n\n\nconst widgetReducer = (state = {widgets: widgets,preview : false}, action) => {\n    if (action.type === 'DELETE_WIDGET') {\n        return {\n            widgets: state.widgets.filter(widget => widget.id !== action.widgetId)\n        }\n    } else if (action.type === 'CREATE_WIDGET') {\n        return {\n            widgets: [\n                ...state.widgets,\n                {\n                    id: (new Date()).getTime(),\n                    name: 'New Widget',\n                    type: 'HEADING',\n                    size:'1',\n                    text: \"heading demo\",\n                    href: \"\",\n                    src: \"\",\n                    ordered: \"true\"\n\n                }\n            ]\n        }\n    } else if (action.type === 'UPDATE_WIDGET') {\n        // console.log(typeof JSON.parse(action.widget.ordered));\n        return {\n            widgets: state.widgets.map(widget => {\n                if (widget.id === action.widget.id) {\n                    widget.size = action.widget.size\n                    widget.text = action.widget.text\n                    widget.href = action.widget.href\n                    widget.src = action.widget.src\n                    widget.ordered = action.widget.ordered  // how to convert string to boolean\n                    return action.widget;\n                }\n                return widget\n            })\n        }\n    }else if(action.type === \"Move_Down\"){\n        return {\n            widgets:newDownWidgets(action.widget,state.widgets)\n        }\n    }else if(action.type === \"Move_Up\"){\n        return {\n            widgets:newUpWidgets(action.widget,state.widgets)\n        }\n    }else if (action.type === \"FIND_WIDGET\"){\n        return {\n            widget:state.widgets.find( widget => widget.id == action.wid)\n        }\n    }else if (action.type === \"FIND_ALL_WIDGET\"){\n        return {\n            widgets:[...state.widgets]\n        }\n    }else if (action.tpye === \"PREVIEW\"){\n        console.log(\"preview\")\n        let newState = Object.assign({}, state)\n        newState.preview = !newState.preview\n        return newState\n    }\n    return state;\n}\n\nvar newDownWidgets = (targetWidget,widgets) => {\n    let newArr = [...widgets]\n    if(newArr.length  < 2){\n        return newArr\n    }\n    for (var i = 0; i < newArr.length; i++){\n        if(targetWidget.id === newArr[i].id && i < newArr.length - 1){\n            var tempWidget = newArr[i + 1]\n            console.log(tempWidget)\n            newArr[i + 1] = newArr[i];\n            newArr[i] = tempWidget;\n            break; //once it is found, it needs to break\n        }\n    }\n    return newArr\n}\n\nvar newUpWidgets = (targetWidget,widgets) => {\n    let newArr = [...widgets]\n    if(newArr.length  < 2){\n        return newArr\n    }\n    for (var i = 0; i < newArr.length; i++){\n        if(targetWidget.id === newArr[i].id && i > 0){\n            var tempWidget = newArr[i - 1]\n            console.log(tempWidget)\n            newArr[i - 1] = newArr[i];\n            newArr[i] = tempWidget;\n            break; //once it is found, it needs to break\n        }\n    }\n    return newArr\n}\n\nexport default widgetReducer"]},"metadata":{},"sourceType":"module"}